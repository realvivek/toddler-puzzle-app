<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Little India Puzzles üé®</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }

        :root {
            --saffron: #FF9933;
            --green: #138808;
            --navy: #000080;
            --gold: #FFD700;
            --bg: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 50%, #FFF8E1 100%);
        }

        body {
            font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
            background: var(--bg);
            min-height: 100vh;
            overflow-x: hidden;
            user-select: none;
        }

        /* ===== HEADER ===== */
        header {
            background: linear-gradient(90deg, #FF9933, #FFFFFF 40%, #FFFFFF 60%, #138808);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 3px 10px rgba(0,0,0,0.15);
        }
        .logo { font-size: 1.5rem; font-weight: 900; color: #000080; letter-spacing: -1px; }
        .logo span { color: #FF9933; }
        .header-stars { font-size: 1.1rem; color: #FF9933; font-weight: bold; }

        /* ===== LEVEL BAR ===== */
        .level-bar {
            background: rgba(255,255,255,0.7);
            padding: 12px 20px;
            display: flex;
            gap: 8px;
            overflow-x: auto;
            border-bottom: 2px solid rgba(255,153,51,0.3);
        }
        .level-btn {
            flex-shrink: 0;
            padding: 8px 16px;
            border-radius: 20px;
            border: 2px solid #FF9933;
            background: white;
            font-size: 0.85rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            color: #FF9933;
        }
        .level-btn.active { background: #FF9933; color: white; }
        .level-btn.locked { border-color: #ccc; color: #ccc; cursor: not-allowed; }
        .level-btn:not(.locked):hover { transform: scale(1.08); }

        /* ===== MAIN GAME ===== */
        .game-wrap {
            max-width: 700px;
            margin: 0 auto;
            padding: 20px;
        }

        .round-header {
            text-align: center;
            margin-bottom: 24px;
        }
        .round-header h2 {
            font-size: 1.6rem;
            font-weight: 900;
            color: #000080;
        }
        .round-header p {
            color: #795548;
            margin-top: 4px;
        }

        /* Stars row */
        .star-row {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .star {
            font-size: 2rem;
            transition: all 0.3s;
            filter: grayscale(1) opacity(0.4);
        }
        .star.earned { filter: none; transform: scale(1.2); }

        /* ===== CARDS GRID ===== */
        .puzzle-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 30px;
        }

        .puzzle-card {
            background: white;
            border-radius: 20px;
            border: 3px solid transparent;
            padding: 18px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 14px rgba(0,0,0,0.08);
            min-height: 120px;
            position: relative;
            overflow: hidden;
        }
        .puzzle-card:hover { transform: translateY(-4px); box-shadow: 0 8px 24px rgba(0,0,0,0.14); }
        .puzzle-card:active { transform: scale(0.95); }
        .puzzle-card.correct {
            border-color: #4CAF50;
            background: #E8F5E9;
            animation: cardWin 0.4s ease;
        }
        .puzzle-card.wrong {
            border-color: #F44336;
            background: #FFEBEE;
            animation: cardShake 0.4s ease;
        }
        .puzzle-card.correct::after {
            content: '‚úì';
            position: absolute;
            top: 6px; right: 10px;
            color: #4CAF50;
            font-size: 1.2rem;
            font-weight: 900;
        }
        .card-emoji { font-size: 52px; line-height: 1; }
        .card-label { font-size: 0.9rem; font-weight: 700; color: #333; text-align: center; }
        .card-hindi { font-size: 0.85rem; color: #9E9E9E; }

        @keyframes cardWin {
            0%,100% { transform: scale(1); }
            40% { transform: scale(1.12) rotate(-3deg); }
            70% { transform: scale(1.08) rotate(3deg); }
        }
        @keyframes cardShake {
            0%,100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        /* ===== QUESTION CARD ===== */
        .question-card {
            background: white;
            border-radius: 24px;
            padding: 24px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border: 2px solid rgba(255,153,51,0.3);
        }
        .question-prompt {
            font-size: 1rem;
            color: #795548;
            margin-bottom: 10px;
            font-weight: 600;
        }
        .question-item {
            font-size: 80px;
            line-height: 1;
            margin: 8px 0;
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%,100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        .question-name {
            font-size: 1.4rem;
            font-weight: 900;
            color: #000080;
        }

        /* ===== PROGRESS ===== */
        .progress-wrap {
            background: #E0E0E0;
            border-radius: 12px;
            height: 12px;
            overflow: hidden;
            margin-bottom: 24px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FF9933, #FFD700);
            border-radius: 12px;
            transition: width 0.5s ease;
        }

        /* ===== CELEBRATION ===== */
        .celebration-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.4);
            z-index: 200;
            align-items: center;
            justify-content: center;
        }
        .celebration-overlay.show { display: flex; }
        .celebration-box {
            background: white;
            border-radius: 30px;
            padding: 40px;
            text-align: center;
            max-width: 340px;
            animation: popUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        @keyframes popUp {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .celeb-emoji { font-size: 80px; }
        .celeb-title { font-size: 1.8rem; font-weight: 900; color: #000080; margin: 10px 0 5px; }
        .celeb-sub { color: #795548; font-size: 1rem; margin-bottom: 20px; }
        .celeb-btn {
            background: linear-gradient(135deg, #FF9933, #FF7043);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 14px 32px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 14px rgba(255,153,51,0.4);
            transition: all 0.2s;
        }
        .celeb-btn:hover { transform: scale(1.05); }

        /* ===== FLOATING FEEDBACK ===== */
        .float-feedback {
            position: fixed;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 70px;
            pointer-events: none;
            z-index: 300;
            animation: feedbackAnim 1.2s ease forwards;
        }
        @keyframes feedbackAnim {
            0% { transform: translate(-50%,-50%) scale(0); opacity: 1; }
            30% { transform: translate(-50%,-80%) scale(1.3); opacity: 1; }
            100% { transform: translate(-50%,-130%) scale(0.8); opacity: 0; }
        }

        /* ===== CONFETTI ===== */
        .confetti-piece {
            position: fixed;
            width: 10px;
            height: 10px;
            top: -10px;
            pointer-events: none;
            z-index: 400;
            animation: confettiFall linear forwards;
        }
        @keyframes confettiFall {
            to { transform: translateY(110vh) rotate(720deg); opacity: 0; }
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 400px) {
            .puzzle-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
            .card-emoji { font-size: 40px; }
            .question-item { font-size: 60px; }
        }
    </style>
</head>
<body>

<header>
    <div class="logo"><span>Little</span> India üáÆüá≥</div>
    <div class="header-stars">‚≠ê <span id="totalStars">0</span></div>
</header>

<div class="level-bar">
    <button class="level-btn active" onclick="loadLevel(0)">üêò Animals</button>
    <button class="level-btn" onclick="loadLevel(1)">üé® Colors</button>
    <button class="level-btn" onclick="loadLevel(2)">üèõÔ∏è Landmarks</button>
    <button class="level-btn locked" title="Coming soon">üéÜ Festivals</button>
    <button class="level-btn locked" title="Coming soon">üçõ Foods</button>
</div>

<div class="game-wrap">

    <div class="question-card">
        <div class="question-prompt">Tap the matching card! üëá</div>
        <div class="question-item" id="questionEmoji">üêò</div>
        <div class="question-name" id="questionName">Elephant</div>
    </div>

    <div class="star-row">
        <div class="star" id="star1">‚≠ê</div>
        <div class="star" id="star2">‚≠ê</div>
        <div class="star" id="star3">‚≠ê</div>
    </div>

    <div class="progress-wrap">
        <div class="progress-fill" id="progressFill" style="width:0%"></div>
    </div>

    <div class="puzzle-grid" id="puzzleGrid"></div>

</div>

<!-- Celebration Modal -->
<div class="celebration-overlay" id="celebOverlay">
    <div class="celebration-box">
        <div class="celeb-emoji" id="celebEmoji">üéâ</div>
        <div class="celeb-title" id="celebTitle">Amazing!</div>
        <div class="celeb-sub" id="celebSub">You got 3 stars!</div>
        <button class="celeb-btn" id="celebBtn" onclick="nextRound()">Next Round ‚Üí</button>
    </div>
</div>

<script>
const LEVELS = [
    {
        id: 0,
        name: 'Animals',
        items: [
            { emoji: 'üêò', name: 'Elephant', hindi: '‡§π‡§æ‡§•‡•Ä' },
            { emoji: 'üêÑ', name: 'Cow',      hindi: '‡§ó‡§æ‡§Ø' },
            { emoji: 'ü¶ö', name: 'Peacock',  hindi: '‡§Æ‡•ã‡§∞' },
            { emoji: 'üêÖ', name: 'Tiger',    hindi: '‡§¨‡§æ‡§ò' },
            { emoji: 'üêí', name: 'Monkey',   hindi: '‡§¨‡§Ç‡§¶‡§∞' },
            { emoji: 'ü¶ú', name: 'Parrot',   hindi: '‡§§‡•ã‡§§‡§æ' },
            { emoji: 'üêä', name: 'Crocodile',hindi: '‡§Æ‡§ó‡§∞' },
            { emoji: 'ü¶Å', name: 'Lion',     hindi: '‡§∂‡•á‡§∞' },
        ]
    },
    {
        id: 1,
        name: 'Colors',
        items: [
            { emoji: 'üî¥', name: 'Red',     hindi: '‡§≤‡§æ‡§≤' },
            { emoji: 'üü†', name: 'Orange',  hindi: '‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä' },
            { emoji: 'üü°', name: 'Yellow',  hindi: '‡§™‡•Ä‡§≤‡§æ' },
            { emoji: 'üü¢', name: 'Green',   hindi: '‡§π‡§∞‡§æ' },
            { emoji: 'üîµ', name: 'Blue',    hindi: '‡§®‡•Ä‡§≤‡§æ' },
            { emoji: 'üü£', name: 'Purple',  hindi: '‡§¨‡•à‡§Ç‡§ó‡§®‡•Ä' },
            { emoji: '‚ö™', name: 'White',   hindi: '‡§∏‡§´‡•á‡§¶' },
            { emoji: '‚ö´', name: 'Black',   hindi: '‡§ï‡§æ‡§≤‡§æ' },
        ]
    },
    {
        id: 2,
        name: 'Landmarks',
        items: [
            { emoji: 'üïå', name: 'Taj Mahal',      hindi: '‡§§‡§æ‡§ú ‡§Æ‡§π‡§≤' },
            { emoji: 'üõï', name: 'Temple',          hindi: '‡§Æ‡§Ç‡§¶‡§ø‡§∞' },
            { emoji: '‚õ©Ô∏è', name: 'Gate',            hindi: '‡§¶‡•ç‡§µ‡§æ‡§∞' },
            { emoji: 'üè∞', name: 'Red Fort',        hindi: '‡§≤‡§æ‡§≤ ‡§ï‡§ø‡§≤‡§æ' },
            { emoji: 'üóº', name: 'Qutub Minar',     hindi: '‡§ï‡§º‡•Å‡§§‡•Å‡§¨ ‡§Æ‡•Ä‡§®‡§æ‡§∞' },
            { emoji: 'üåä', name: 'Marina Beach',    hindi: '‡§Æ‡§∞‡•Ä‡§®‡§æ ‡§¨‡•Ä‡§ö' },
            { emoji: '‚õ™', name: 'Basilica',        hindi: '‡§¨‡•á‡§∏‡§ø‡§≤‡§ø‡§ï‡§æ' },
            { emoji: 'üèîÔ∏è', name: 'Himalayas',       hindi: '‡§π‡§ø‡§Æ‡§æ‡§≤‡§Ø' },
        ]
    }
];

let currentLevel = 0;
let currentRound = 0;
let roundItems = [];
let correctItem = null;
let wrongAttempts = 0;
let totalStars = 0;
let roundScore = 0; // stars this round

function shuffle(arr) {
    return [...arr].sort(() => Math.random() - 0.5);
}

function loadLevel(idx) {
    document.querySelectorAll('.level-btn').forEach((b, i) => {
        b.classList.toggle('active', i === idx);
    });
    currentLevel = idx;
    currentRound = 0;
    roundScore = 0;
    updateStarDisplay(0);
    startRound();
}

function startRound() {
    wrongAttempts = 0;
    const level = LEVELS[currentLevel];
    const all = shuffle(level.items);

    // Pick correct answer
    correctItem = all[0];

    // Pick 5 wrong distractors (or fewer if not enough items)
    const wrong = all.slice(1, 6);

    // Combine and shuffle for grid (show 6 cards: 1 correct + 5 wrong, but at least 3 cards)
    const gridItems = shuffle([correctItem, ...wrong].slice(0, 6));

    // Update question
    document.getElementById('questionEmoji').textContent = correctItem.emoji;
    document.getElementById('questionName').textContent = correctItem.name;

    // Render grid
    const grid = document.getElementById('puzzleGrid');
    grid.innerHTML = '';
    gridItems.forEach(item => {
        const card = document.createElement('div');
        card.className = 'puzzle-card';
        card.innerHTML = `
            <div class="card-emoji">${item.emoji}</div>
            <div class="card-label">${item.name}</div>
            <div class="card-hindi">${item.hindi}</div>
        `;
        card.onclick = () => handleTap(card, item);
        grid.appendChild(card);
    });

    // Progress
    const progress = (currentRound / level.items.length) * 100;
    document.getElementById('progressFill').style.width = progress + '%';
}

function handleTap(card, item) {
    if (card.classList.contains('correct') || card.classList.contains('wrong')) return;

    if (item === correctItem) {
        card.classList.add('correct');
        vibrate(40);
        playSound('correct');

        const earned = wrongAttempts === 0 ? 3 : wrongAttempts === 1 ? 2 : 1;
        roundScore += earned;
        totalStars += earned;
        document.getElementById('totalStars').textContent = totalStars;
        updateStarDisplay(earned);
        showFeedback(earned === 3 ? 'üåü' : earned === 2 ? '‚≠ê' : 'üëç');
        triggerConfetti();

        currentRound++;
        setTimeout(() => {
            if (currentRound >= LEVELS[currentLevel].items.length) {
                showCelebration();
            } else {
                startRound();
            }
        }, 900);

    } else {
        card.classList.add('wrong');
        wrongAttempts++;
        vibrate(80);
        playSound('wrong');
        showFeedback('‚ùå');
        setTimeout(() => card.classList.remove('wrong'), 600);
    }
}

function updateStarDisplay(earned) {
    ['star1','star2','star3'].forEach((id, i) => {
        document.getElementById(id).classList.toggle('earned', i < earned);
    });
}

function showFeedback(emoji) {
    const el = document.createElement('div');
    el.className = 'float-feedback';
    el.textContent = emoji;
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 1200);
}

function showCelebration() {
    const starsMax = LEVELS[currentLevel].items.length * 3;
    const pct = Math.round((roundScore / starsMax) * 100);
    const emoji = pct >= 90 ? 'üèÜ' : pct >= 70 ? 'üéâ' : 'üëè';
    const title = pct >= 90 ? 'Perfect!' : pct >= 70 ? 'Great Job!' : 'Well Done!';

    document.getElementById('celebEmoji').textContent = emoji;
    document.getElementById('celebTitle').textContent = title;
    document.getElementById('celebSub').textContent = `You earned ${roundScore} stars! (${pct}%)`;

    const overlay = document.getElementById('celebOverlay');
    overlay.classList.add('show');
}

function nextRound() {
    document.getElementById('celebOverlay').classList.remove('show');
    currentRound = 0;
    roundScore = 0;
    updateStarDisplay(0);
    startRound();
}

function vibrate(ms) {
    if (navigator.vibrate) navigator.vibrate(ms);
}

function playSound(type) {
    try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain);
        gain.connect(ctx.destination);

        if (type === 'correct') {
            osc.frequency.setValueAtTime(440, ctx.currentTime);
            osc.frequency.setValueAtTime(550, ctx.currentTime + 0.08);
            osc.frequency.setValueAtTime(660, ctx.currentTime + 0.16);
            osc.frequency.setValueAtTime(880, ctx.currentTime + 0.24);
        } else {
            osc.frequency.setValueAtTime(220, ctx.currentTime);
            osc.frequency.setValueAtTime(180, ctx.currentTime + 0.1);
        }

        gain.gain.setValueAtTime(0.25, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.4);
        osc.start(ctx.currentTime);
        osc.stop(ctx.currentTime + 0.45);
    } catch(e) {}
}

function triggerConfetti() {
    const colors = ['#FF9933','#138808','#000080','#FFD700','#FF6B6B','#4CAF50'];
    for (let i = 0; i < 30; i++) {
        setTimeout(() => {
            const el = document.createElement('div');
            el.className = 'confetti-piece';
            el.style.left = Math.random() * 100 + 'vw';
            el.style.background = colors[Math.floor(Math.random() * colors.length)];
            el.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
            el.style.animationDuration = (1 + Math.random() * 2) + 's';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 3000);
        }, i * 30);
    }
}

// Boot
loadLevel(0);
</script>
</body>
</html>
